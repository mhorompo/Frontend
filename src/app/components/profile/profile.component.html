<app-header></app-header>
<div class="container p-0" style="margin-top: 140px; width: 50%">
  <form (ngSubmit)="update()" [formGroup]="profileForm">
    <div class="card background p-5" style="border-radius: 1rem; margin-top: 135px">
      <fieldset>
        <h4 class="desc text-center">Update you're profile data</h4>
        <div class="fieldset-content">
          <div class="form-group">
            <label class="form-label text-black" for="email">Email address</label>
            <input type="email" [ngClass]="{ error: isError('email') }" id="email" class="form-control form-control-lg"
              formControlName="email" />
            <div *ngIf="
                profileForm.get('email')?.hasError('required') &&
                profileForm.get('email')?.dirty
              " class="text-danger feedback">
              Email is required
            </div>
            <div *ngIf="
                profileForm.get('email')?.hasError('email') &&
                profileForm.get('email')?.dirty
              " class="text-danger feedback">
              Invalid email format
            </div>
          </div>

          <div class="form-row">
            <div class="form-flex">
              <div class="form-group">
                <label class="form-label text-black" for="firstName">First Name</label>
                <input type="text" id="firstName" class="form-control form-control-lg" formControlName="firstName"
                  [ngClass]="{ error: isError('firstName') }" />
                <div class="text-danger feedback" *ngIf="
                    profileForm.get('firstName')?.hasError('required') &&
                    profileForm.get('firstName')?.dirty
                  ">
                  Please enter your first name
                </div>
              </div>

              <div class="form-group">
                <label class="form-label text-black" for="lastName">Last Name</label>
                <input type="text" id="lastName" class="form-control form-control-lg" formControlName="lastName"
                  [ngClass]="{ error: isError('lastName') }" />
                <div class="text-danger feedback" *ngIf="
                    profileForm.get('lastName')?.hasError('required') &&
                    profileForm.get('lastName')?.dirty
                  ">
                  Please enter your last name
                </div>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label text-black" for="password">Password</label>
            <div class="input-container">
              <input type="password" id="password" class="form-control form-control-lg" formControlName="password"
                [ngClass]="{ error: isError('password') }" />
              <i class="icon bi bi-eye-slash" id="togglePassword" (click)="toggleFieldTextType()"></i>
            </div>
            <div class="text-danger feedback" *ngIf="
                profileForm.get('password')?.hasError('required') &&
                profileForm.get('password')?.touched
              ">
              Please choose a Password
            </div>
            <div class="text-danger feedback" *ngIf="
                profileForm.get('password')?.hasError('minlength') &&
                profileForm.get('password')?.touched
              ">
              Password must be at least 6 characters long
            </div>
          </div>
        </div>
      </fieldset>
      <div class="pt-1 mb-4 text-center">
        <button [disabled]="this.profileForm.invalid" class="palatin-btn" type="submit">
          Update
        </button>
      </div>
    </div>
  </form>
</div>